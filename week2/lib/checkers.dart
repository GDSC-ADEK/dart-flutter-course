import 'package:collection/collection.dart';

const List<Map<String, List<List<String>>>> data = [
  {
    "personalAlergen": [[]],
    "foodItems": [
      ["soy"],
      ["sesame seeds", "fish", "eggs", "rice"],
      [],
      ["eggs"],
      ["wheat", "eggs", "rice"],
      ["shellfish"],
      [],
      ["peanuts", "soy"],
      [],
      [],
      ["tree nuts", "milk"],
      ["shellfish"],
      [],
      ["fish"],
      ["tree nuts", "peanuts", "milk", "rice"],
      ["peanuts"],
      [],
      ["wheat", "eggs", "soy"],
      [],
      [],
      ["tree nuts", "fish", "soy", "rice"],
      ["tree nuts", "peanuts", "rice"],
      ["wheat", "eggs", "peanuts"],
      ["sesame seeds"],
      ["sesame seeds", "fish", "peanuts", "rice"],
      ["rice"],
      ["wheat", "eggs", "tree nuts", "shellfish", "fish"],
      [],
      ["peanuts", "rice"],
      [],
      ["shellfish"],
      ["fish"],
      [],
      [],
      ["tree nuts", "wheat", "eggs", "peanuts"],
      ["sesame seeds", "milk"],
      ["wheat"],
      ["wheat"],
      ["wheat", "peanuts", "soy", "shellfish"],
      ["tree nuts"],
      [],
      [],
      ["peanuts", "shellfish"],
      ["fish", "eggs", "milk"],
      [],
      ["milk", "fish", "shellfish"],
      ["tree nuts", "fish"],
      [],
      ["fish"],
      ["wheat", "eggs", "rice"],
      ["wheat", "fish", "eggs", "soy"],
      ["eggs", "peanuts", "soy"],
      ["eggs", "milk", "tree nuts", "rice", "fish"],
      ["tree nuts"],
      [],
      ["peanuts", "soy"],
      ["tree nuts", "wheat", "shellfish"],
      [],
      ["sesame seeds", "shellfish"],
      ["sesame seeds", "peanuts"],
      ["sesame seeds", "tree nuts", "wheat"],
      [],
      ["sesame seeds", "peanuts"],
      ["tree nuts", "eggs", "peanuts", "soy"],
      ["tree nuts", "milk", "sesame seeds", "shellfish"],
      ["tree nuts", "soy"],
      ["fish", "peanuts", "rice"],
      ["sesame seeds", "soy", "shellfish"],
      ["tree nuts", "peanuts", "shellfish"],
      ["fish", "wheat", "peanuts"],
      ["peanuts"],
      ["fish", "shellfish"],
      [],
      ["tree nuts", "eggs", "peanuts", "rice"],
      ["sesame seeds", "fish", "soy", "milk"],
      ["wheat", "eggs", "soy", "sesame seeds", "peanuts"],
      ["eggs"],
      ["sesame seeds", "eggs", "soy", "peanuts"],
      [],
      [],
      ["soy", "milk"],
      ["eggs"],
      ["tree nuts", "peanuts", "milk"],
      ["fish"],
      [],
      ["sesame seeds", "peanuts", "soy", "rice"],
      ["fish", "peanuts", "rice"],
      [],
      ["fish", "rice"],
      ["fish", "peanuts"],
      ["wheat", "milk", "rice", "fish", "peanuts"],
      [],
      ["sesame seeds"],
      ["tree nuts", "fish", "eggs", "peanuts"],
      ["tree nuts", "peanuts", "soy"],
      ["wheat", "soy", "milk", "tree nuts", "shellfish", "fish"],
      ["wheat"],
      ["sesame seeds", "tree nuts", "peanuts"],
      ["tree nuts", "peanuts"],
      ["rice", "shellfish", "soy"],
      ["soy", "milk", "rice", "fish", "peanuts"],
      [],
      ["fish"],
      ["fish"],
      [],
      [],
      [],
      ["peanuts", "milk"],
      [],
      ["rice"],
      ["peanuts"],
      [],
      ["tree nuts", "milk", "rice"],
      ["eggs", "milk", "sesame seeds", "rice", "peanuts"],
      ["eggs"],
      ["wheat", "eggs", "peanuts", "shellfish"],
      [],
      ["eggs", "soy", "milk", "shellfish", "rice"],
      ["tree nuts", "eggs", "milk"],
      ["wheat", "eggs", "shellfish"],
      ["peanuts", "milk"],
      ["fish", "soy"],
      ["sesame seeds"],
      [],
      ["wheat", "rice"],
      ["soy", "milk"],
      ["wheat", "peanuts", "soy"],
      [],
      ["fish"],
      ["wheat", "rice"],
      ["fish", "peanuts", "rice", "soy"],
      ["milk"],
      ["sesame seeds", "wheat", "eggs", "shellfish"],
      [],
      ["soy"],
      ["wheat", "milk"],
      [],
      [],
      ["soy"],
      ["peanuts"],
      ["sesame seeds"],
      ["milk", "eggs", "soy", "rice"],
      ["milk"],
      ["wheat"],
      [],
      ["tree nuts", "eggs", "rice"]
    ],
    "result": []
  },
  {
    "personalAlergen": [
      ["eggs"]
    ],
    "foodItems": [
      ["peanuts"],
      ["fish", "peanuts", "rice"],
      ["fish", "peanuts"],
      ["sesame seeds"],
      ["sesame seeds", "eggs", "shellfish"],
      [],
      [],
      ["peanuts"],
      ["sesame seeds", "shellfish"],
      ["wheat", "milk", "sesame seeds", "tree nuts", "fish", "peanuts"],
      [],
      ["wheat"],
      ["tree nuts"],
      ["tree nuts", "sesame seeds", "soy"],
      [],
      ["sesame seeds"],
      ["rice"],
      [],
      [],
      ["soy", "milk", "tree nuts", "shellfish", "peanuts"],
      [],
      ["peanuts", "milk"],
      ["rice"],
      ["tree nuts", "sesame seeds", "peanuts", "soy"],
      ["tree nuts"],
      ["tree nuts", "eggs", "rice", "shellfish"],
      ["tree nuts", "rice"],
      [],
      [],
      ["peanuts"],
      ["fish", "eggs", "milk", "shellfish"],
      ["tree nuts"],
      [],
      ["peanuts"],
      ["peanuts", "soy", "rice"],
      [],
      ["fish", "eggs", "peanuts", "shellfish"],
      ["wheat", "peanuts", "soy", "milk"],
      ["sesame seeds", "fish", "wheat"],
      ["soy"],
      ["sesame seeds"],
      ["fish", "eggs", "rice", "shellfish"],
      ["rice"],
      ["tree nuts", "fish", "soy"],
      []
    ],
    "result": [
      ["sesame seeds", "eggs", "shellfish"],
      ["tree nuts", "eggs", "rice", "shellfish"],
      ["fish", "eggs", "milk", "shellfish"],
      ["fish", "eggs", "peanuts", "shellfish"],
      ["fish", "eggs", "rice", "shellfish"]
    ]
  },
  {
    "personalAlergen": [
      ["eggs", "rice", "shellfish"]
    ],
    "foodItems": [],
    "result": []
  },
  {
    "personalAlergen": [
      ["milk", "shellfish"]
    ],
    "foodItems": [
      [],
      ["sesame seeds", "rice"],
      ["shellfish"],
      ["milk", "tree nuts", "sesame seeds", "rice", "fish"],
      ["sesame seeds"],
      ["eggs", "milk", "sesame seeds", "tree nuts", "rice", "peanuts"],
      []
    ],
    "result": [
      ["shellfish"],
      ["milk", "tree nuts", "sesame seeds", "rice", "fish"],
      ["eggs", "milk", "sesame seeds", "tree nuts", "rice", "peanuts"]
    ]
  }
];

void ex1Checker(int answer) {
  if (answer == 3682913) {
    print("Answer is correct. You may continue to the next excercise");
  } else if (answer == 3682914) {
    print(
        "Answer is not correct. Make sure 1 is not included in your list of primes.");
  } else {
    print("Answer is not correct.");
  }
  print("0--------------------------------------");
}

void ex2Checker(Function yourFunction) {
  Function deepEq = const DeepCollectionEquality().equals;
  for (var testCase in data) {
    List<String> arg1 = testCase["personalAlergen"]![0];
    var arg2 = testCase["foodItems"];
    List<List<String>> result = List.from(testCase["result"]!);
    result.sort((a, b) => a.length.compareTo(b.length));
    List<List<String>> yourResult = yourFunction(arg1, arg2);
    yourResult.sort((a, b) => a.length.compareTo(b.length));
    var passed = deepEq(yourResult, result);

    if (!passed) {
      print("Testcase failed with these arguments");
      print("arg1: $arg1");
      print("arg2: $arg2");
      // print("result $yourResult");
      // print("expected: $result");
      return;
    } else {
      print("Testcase passed");
    }
    print("-------------------");
  }
  print("All test cases passed, you may continue to excercise 3");
}

void ex3Checker(Function yourFunction) {
  var ISBNs = {
    '1-892576-91-0': true,
    '0-19-195411-X': true,
    '1892576910': true,
    '0 19 195411 X': true,
    '1-892976-91-0': false,
    '0-19-195711-X': false,
    '1892571910': false,
    '0 19 195011 X': false,
  };

  for (final test in ISBNs.entries) {
    if (yourFunction(test.key) != test.value) {
      print("Testcase failed with this arguments");
      print("arg: ${test.key}");
      return;
    } else {
      print("Testcase passed");
    }
    print("-------------------");
  }
  print("All test cases passed, you may continue to excercise 4");
}


/*
4. 
Similar to the ex2 , only slightly more difficult.
The alergens have a score now
{"milk" : 1, "eggs": 2, "peanuts": 4, "shellfish": 8, "fish": 16, "wheat":32, "soy": 64, "tree nuts": 128, "sesame seeds": 256, "rice": 512}
an integer can represent a person's alergen score, which can be decomposed in unique individual alergens.
For example, a score of 11 means the person is alergic to [shellfish, eggs, and milk].
Note that it can't be [peanuts, peanuts, eggs, milk].

Similarly, the food items can be represented with an alergen score instead of a list of alergens.
Your task is to create a function which accepts 2 arguments.
The first is an integer representing a person's alergen score
The second is a list of integers, each of which represents the food's alergen score.
Your task is to return the list of integers representing the food items the person is alergic to
*/